# 성능 지표 상세 분석

> **측정일**: 2026-01-20

## 1. 현재 시스템 지표

### 1.1 파일 시스템

| 항목 | 값 | 비고 |
|------|-----|------|
| 총 Python 코드 라인 | 4,780 | 17개 파일 |
| 최대 파일 크기 | 2,081 lines | app.py |
| scraped_data 용량 | 1.5GB | 증가 중 |
| 템플릿 파일 수 | 12 | Jinja2 HTML |
| 정적 파일 수 | 1 | style.css |

### 1.2 API 응답 시간 (추정)

| 엔드포인트 | 현재 | 목표 |
|-----------|------|------|
| GET /review | ~5s | <1s |
| GET /registered | ~3s | <500ms |
| POST /api/batch_collect | ~2s | <1s |
| POST /api/upload_to_dev_db | ~10s | <3s |

### 1.3 외부 API 제한

| API | Rate Limit | 현재 사용 |
|-----|------------|-----------|
| Mistral | 1 req/sec | 준수 |
| Apify | 제한 없음 | 정상 |
| Google Geocoding | 50 req/sec | 여유 |
| GCS | 제한 없음 | 정상 |

## 2. 병목 지점 분석

### 2.1 find_local_image 함수

```
호출 빈도: 매 포스트당 1회
평균 실행 시간: 50-200ms (파일 수에 비례)
총 영향: 100개 포스트 = 5-20초 추가 지연
```

### 2.2 Mistral API 호출

```
Rate Limit: 1 req/sec
포스트당 2회 호출: OCR + LLM
10개 포스트 처리 = 최소 20초
```

### 2.3 DB 연결

```
현재: 호출당 새 연결 생성
문제: 연결 오버헤드 누적
해결: 커넥션 풀링 도입 필요
```

## 3. 메모리 사용량 분석

| 컴포넌트 | 예상 사용량 |
|----------|-------------|
| Flask 앱 | ~100MB |
| 이미지 처리 | ~200MB |
| DB 연결 | ~50MB |
| 기타 | ~150MB |
| **총합** | **~500MB** |

## 4. 개선 우선순위

1. 🔴 이미지 경로 캐싱 (즉시)
2. 🟠 DB 커넥션 풀링 (1주 내)
3. 🟠 비동기 API 호출 (2주 내)
4. 🟡 app.py 분리 (1개월 내)
